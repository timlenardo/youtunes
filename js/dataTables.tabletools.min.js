var ZeroClipboard_TableTools={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(b){"string"==typeof b&&(b=document.getElementById(b));if(!b.addClass)b.hide=function(){this.style.display="none"},b.show=function(){this.style.display=""},b.addClass=function(b){this.removeClass(b);this.className+=" "+b},b.removeClass=function(b){this.className=this.className.replace(RegExp("\\s*"+b+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},b.hasClass=function(b){return!!this.className.match(RegExp("\\s*"+
b+"\\s*"))};return b},setMoviePath:function(b){this.moviePath=b},dispatch:function(b,e,g){(b=this.clients[b])&&b.receiveEvent(e,g)},register:function(b,e){this.clients[b]=e},getDOMObjectPosition:function(b){var e={left:0,top:0,width:b.width?b.width:b.offsetWidth,height:b.height?b.height:b.offsetHeight};if(""!=b.style.width)e.width=b.style.width.replace("px","");if(""!=b.style.height)e.height=b.style.height.replace("px","");for(;b;)e.left+=b.offsetLeft,e.top+=b.offsetTop,b=b.offsetParent;return e},
Client:function(b){this.handlers={};this.id=ZeroClipboard_TableTools.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;ZeroClipboard_TableTools.register(this.id,this);b&&this.glue(b)}};
ZeroClipboard_TableTools.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(b,e){this.domElement=ZeroClipboard_TableTools.$(b);var g=99;this.domElement.style.zIndex&&(g=parseInt(this.domElement.style.zIndex)+1);var a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);this.div=document.createElement("div");var c=this.div.style;c.position="absolute";c.left=this.domElement.offsetLeft+"px";
c.top=this.domElement.offsetTop+"px";c.width=a.width+"px";c.height=a.height+"px";c.zIndex=g;if("undefined"!=typeof e&&""!=e)this.div.title=e;if(0!=a.width&&0!=a.height)this.sized=!0;if(this.domElement.parentNode)this.domElement.parentNode.appendChild(this.div),this.div.innerHTML=this.getHTML(a.width,a.height)},positionElement:function(){var b=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement),e=this.div.style;e.position="absolute";e.left=this.domElement.offsetLeft+"px";e.top=this.domElement.offsetTop+
"px";e.width=b.width+"px";e.height=b.height+"px";if(0!=b.width&&0!=b.height)this.sized=!0,e=this.div.childNodes[0],e.width=b.width,e.height=b.height},getHTML:function(b,e){var g="",a="id="+this.id+"&width="+b+"&height="+e;if(navigator.userAgent.match(/MSIE/))var c=location.href.match(/^https/i)?"https://":"http://",g=g+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+c+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+b+'" height="'+
e+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard_TableTools.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+a+'"/><param name="wmode" value="transparent"/></object>');else g+='<embed id="'+this.movieId+'" src="'+ZeroClipboard_TableTools.moviePath+
'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+b+'" height="'+e+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+a+'" wmode="transparent" />';return g},hide:function(){if(this.div)this.div.style.left="-2000px"},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML=
"";var b=document.getElementsByTagName("body")[0];try{b.removeChild(this.div)}catch(e){}this.div=this.domElement=null}},reposition:function(b){if(b)(this.domElement=ZeroClipboard_TableTools.$(b))||this.hide();if(this.domElement&&this.div){var b=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement),e=this.div.style;e.left=""+b.left+"px";e.top=""+b.top+"px"}},clearText:function(){this.clipText="";this.ready&&this.movie.clearText()},appendText:function(b){this.clipText+=b;this.ready&&this.movie.appendText(b)},
setText:function(b){this.clipText=b;this.ready&&this.movie.setText(b)},setCharSet:function(b){this.charSet=b;this.ready&&this.movie.setCharSet(b)},setBomInc:function(b){this.incBom=b;this.ready&&this.movie.setBomInc(b)},setFileName:function(b){this.fileName=b;this.ready&&this.movie.setFileName(b)},setAction:function(b){this.action=b;this.ready&&this.movie.setAction(b)},addEventListener:function(b,e){b=b.toString().toLowerCase().replace(/^on/,"");this.handlers[b]||(this.handlers[b]=[]);this.handlers[b].push(e)},
setHandCursor:function(b){this.handCursorEnabled=b;this.ready&&this.movie.setHandCursor(b)},setCSSEffects:function(b){this.cssEffects=!!b},receiveEvent:function(b,e){b=b.toString().toLowerCase().replace(/^on/,"");switch(b){case "load":this.movie=document.getElementById(this.movieId);if(!this.movie){var g=this;setTimeout(function(){g.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){g=this;setTimeout(function(){g.receiveEvent("load",
null)},100);this.ready=!0;return}this.ready=!0;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);break;case "mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case "mouseout":if(this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")))this.domElement.removeClass("active"),
this.recoverActive=!0;break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":if(this.domElement&&this.cssEffects)this.domElement.removeClass("active"),this.recoverActive=!1}if(this.handlers[b])for(var a=0,c=this.handlers[b].length;a<c;a++){var f=this.handlers[b][a];if("function"==typeof f)f(this,e);else if("object"==typeof f&&2==f.length)f[0][f[1]](this,e);else if("string"==typeof f)window[f](this,e)}}};var TableTools;
(function(b,e,g){TableTools=function(a,c){(!this.CLASS||"TableTools"!=this.CLASS)&&alert("Warning: TableTools must be initialised with the keyword 'new'");this.s={that:this,dt:null,print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,
background:null}};this.fnSettings=function(){return this.s};"undefined"==typeof c&&(c={});this.s.dt=a.fnSettings();this._fnConstruct(c);return this};TableTools.prototype={fnGetSelected:function(){return this._fnGetMasterSettings().select.selected},fnGetSelectedData:function(){for(var a=this._fnGetMasterSettings().select.selected,c=[],b=0,d=a.length;b<d;b++)c.push(this.s.dt.oInstance.fnGetData(a[b]));return c},fnIsSelected:function(a){for(var c=this.fnGetSelected(),b=0,d=c.length;b<d;b++)if(a==c[b])return!0;
return!1},fnSelectAll:function(){this._fnGetMasterSettings().that._fnRowSelectAll()},fnSelectNone:function(){this._fnGetMasterSettings().that._fnRowDeselectAll()},fnSelect:function(a){this.fnIsSelected(a)||("single"==this.s.select.type?this._fnRowSelectSingle(a):"multi"==this.s.select.type&&this._fnRowSelectMulti(a))},fnDeselect:function(a){this.fnIsSelected(a)&&("single"==this.s.select.type?this._fnRowSelectSingle(a):"multi"==this.s.select.type&&this._fnRowSelectMulti(a))},fnGetTitle:function(a){var c=
"";if("undefined"!=typeof a.sTitle&&""!==a.sTitle)c=a.sTitle;else if(a=g.getElementsByTagName("title"),0<a.length)c=a[0].innerHTML;return 4>"\u00a1".toString().length?c.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):c.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(a){var c=this.s.dt.aoColumns,a=this._fnColumnTargets(a.mColumns),b=[],d=0,j=0,e,g;for(e=0,g=a.length;e<g;e++)if(a[e])d=c[e].nTh.offsetWidth,j+=d,b.push(d);for(e=0,g=b.length;e<g;e++)b[e]/=j;return b.join("\t")},
fnGetTableData:function(a){if(this.s.dt)return this._fnGetDataTablesData(a)},fnSetText:function(a,c){this._fnFlashSetText(a,c)},fnResizeButtons:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var c=ZeroClipboard_TableTools.clients[a];"undefined"!=typeof c.domElement&&c.domElement.parentNode==this.dom.container&&c.positionElement()}},fnResizeRequired:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var c=ZeroClipboard_TableTools.clients[a];if("undefined"!=typeof c.domElement&&
c.domElement.parentNode==this.dom.container&&!1===c.sized)return!0}return!1},_fnConstruct:function(a){var c=this;this._fnCustomiseSettings(a);this.dom.container=g.createElement("div");this.dom.container.className=!this.s.dt.bJUI?"DTTT_container":"DTTT_container ui-buttonset ui-buttonset-multi";"none"!=this.s.select.type&&this._fnRowSelectConfig();this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){c.dom.container.innerHTML=
""}})},_fnCustomiseSettings:function(a){if("undefined"==typeof this.s.dt._TableToolsInit)this.s.master=!0,this.s.dt._TableToolsInit=!0;this.dom.table=this.s.dt.nTable;this.s.custom=b.extend({},TableTools.DEFAULTS,a);this.s.swfPath=this.s.custom.sSwfPath;if("undefined"!=typeof ZeroClipboard_TableTools)ZeroClipboard_TableTools.moviePath=this.s.swfPath;this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;
this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.select.selectedClass=this.s.custom.sSelectedClass;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(a,c){for(var f,d=0,j=a.length;d<j;d++){if("string"==typeof a[d]){if("undefined"==typeof TableTools.BUTTONS[a[d]]){alert("TableTools: Warning - unknown button type: "+a[d]);continue}f=b.extend({},TableTools.BUTTONS[a[d]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[a[d].sExtends]){alert("TableTools: Warning - unknown button type: "+
a[d].sExtends);continue}f=b.extend({},TableTools.BUTTONS[a[d].sExtends],!0);f=b.extend(f,a[d],!0)}this.s.dt.bJUI?(f.sButtonClass+=" ui-button ui-state-default",f.sButtonClassHover+=" ui-state-hover"):f.sButtonClassHover+=" DTTT_button_hover";c.appendChild(this._fnCreateButton(f))}},_fnCreateButton:function(a){var c="div"==a.sAction?this._fnDivBase(a):this._fnButtonBase(a);"print"==a.sAction?this._fnPrintConfig(c,a):a.sAction.match(/flash/)?this._fnFlashConfig(c,a):"text"==a.sAction?this._fnTextConfig(c,
a):"div"==a.sAction?this._fnTextConfig(c,a):"collection"==a.sAction&&(this._fnTextConfig(c,a),this._fnCollectionConfig(c,a));return c},_fnButtonBase:function(a){var c=g.createElement("button"),b=g.createElement("span"),d=this._fnGetMasterSettings();c.className="DTTT_button "+a.sButtonClass;c.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+d.buttonCounter);c.appendChild(b);b.innerHTML=a.sButtonText;d.buttonCounter++;return c},_fnDivBase:function(a){var c=g.createElement("div"),b=this._fnGetMasterSettings();
c.className=a.sButtonClass;c.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+b.buttonCounter);c.innerHTML=a.sButtonText;null!==a.nContent&&c.appendChild(a.nContent);b.buttonCounter++;return c},_fnGetMasterSettings:function(){if(this.s.master)return this.s;for(var a=TableTools._aInstances,c=0,b=a.length;c<b;c++)if(this.dom.table==a[c].s.dt.nTable)return a[c].s},_fnCollectionConfig:function(a,c){var b=g.createElement("div");b.style.display="none";b.className=!this.s.dt.bJUI?"DTTT_collection":
"DTTT_collection ui-buttonset ui-buttonset-multi";c._collection=b;g.body.appendChild(b);this._fnButtonDefinations(c.aButtons,b)},_fnCollectionShow:function(a,c){var f=this,d=b(a).offset(),j=c._collection,m=d.left,d=d.top+b(a).outerHeight(),n=b(e).height(),h=b(g).height(),k=b(e).width(),o=b(g).width();j.style.position="absolute";j.style.left=m+"px";j.style.top=d+"px";j.style.display="block";b(j).css("opacity",0);var l=g.createElement("div");l.style.position="absolute";l.style.left="0px";l.style.top=
"0px";l.style.height=(n>h?n:h)+"px";l.style.width=(k>o?k:o)+"px";l.className="DTTT_collection_background";b(l).css("opacity",0);g.body.appendChild(l);g.body.appendChild(j);n=b(j).outerWidth();k=b(j).outerHeight();if(m+n>o)j.style.left=o-n+"px";if(d+k>h)j.style.top=d-k-b(a).outerHeight()+"px";this.dom.collection.collection=j;this.dom.collection.background=l;setTimeout(function(){b(j).animate({opacity:1},500);b(l).animate({opacity:0.25},500)},10);b(l).click(function(){f._fnCollectionHide.call(f,null,
null)})},_fnCollectionHide:function(a,c){if(!(null!==c&&"collection"==c.sExtends)&&null!==this.dom.collection.collection)b(this.dom.collection.collection).animate({opacity:0},500,function(){this.style.display="none"}),b(this.dom.collection.background).animate({opacity:0},500,function(){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null},_fnRowSelectConfig:function(){if(this.s.master){var a=this;b(a.s.dt.nTable).addClass("DTTT_selectable");b("tr",
a.s.dt.nTBody).live("click",function(c){if(this.parentNode==a.s.dt.nTBody){var f=a.s.dt.oInstance.fnGetNodes();-1===b.inArray(this,f)||null!==a.s.select.preRowSelect&&!a.s.select.preRowSelect.call(a,c)||("single"==a.s.select.type?a._fnRowSelectSingle.call(a,this):a._fnRowSelectMulti.call(a,this))}});a.s.dt.aoDrawCallback.push({fn:function(){a.s.select.all&&a.s.dt.oFeatures.bServerSide&&a.fnSelectAll()},sName:"TableTools_select"})}},_fnRowSelectSingle:function(a){this.s.master&&!b("td",a).hasClass(this.s.dt.oClasses.sRowEmpty)&&
(b(a).hasClass(this.s.select.selectedClass)?this._fnRowDeselect(a):(0!==this.s.select.selected.length&&this._fnRowDeselectAll(),this.s.select.selected.push(a),b(a).addClass(this.s.select.selectedClass),null!==this.s.select.postSelected&&this.s.select.postSelected.call(this,a)),TableTools._fnEventDispatch(this,"select",a))},_fnRowSelectMulti:function(a){this.s.master&&!b("td",a).hasClass(this.s.dt.oClasses.sRowEmpty)&&(b(a).hasClass(this.s.select.selectedClass)?this._fnRowDeselect(a):(this.s.select.selected.push(a),
b(a).addClass(this.s.select.selectedClass),null!==this.s.select.postSelected&&this.s.select.postSelected.call(this,a)),TableTools._fnEventDispatch(this,"select",a))},_fnRowSelectAll:function(){if(this.s.master){for(var a,c=0,f=this.s.dt.aiDisplayMaster.length;c<f;c++)a=this.s.dt.aoData[this.s.dt.aiDisplayMaster[c]].nTr,b(a).hasClass(this.s.select.selectedClass)||(this.s.select.selected.push(a),b(a).addClass(this.s.select.selectedClass));null!==this.s.select.postSelected&&this.s.select.postSelected.call(this,
null);this.s.select.all=!0;TableTools._fnEventDispatch(this,"select",null)}},_fnRowDeselectAll:function(){if(this.s.master){for(var a=this.s.select.selected.length-1;0<=a;a--)this._fnRowDeselect(a,!1);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,null);this.s.select.all=!1;TableTools._fnEventDispatch(this,"select",null)}},_fnRowDeselect:function(a,c){"undefined"!=typeof a.nodeName&&(a=b.inArray(a,this.s.select.selected));var f=this.s.select.selected[a];b(f).removeClass(this.s.select.selectedClass);
this.s.select.selected.splice(a,1);("undefined"==typeof c||c)&&null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,f);this.s.select.all=!1},_fnTextConfig:function(a,c){var f=this;null!==c.fnInit&&c.fnInit.call(this,a,c);if(""!==c.sToolTip)a.title=c.sToolTip;b(a).hover(function(){b(a).addClass(c.sButtonClassHover);null!==c.fnMouseover&&c.fnMouseover.call(this,a,c,null)},function(){b(a).removeClass(c.sButtonClassHover);null!==c.fnMouseout&&c.fnMouseout.call(this,a,c,null)});
null!==c.fnSelect&&TableTools._fnEventListen(this,"select",function(b){c.fnSelect.call(f,a,c,b)});b(a).click(function(b){b.preventDefault();null!==c.fnClick&&c.fnClick.call(f,a,c,null);null!==c.fnComplete&&c.fnComplete.call(f,a,c,null,null);f._fnCollectionHide(a,c)})},_fnFlashConfig:function(a,c){var f=this,d=new ZeroClipboard_TableTools.Client;null!==c.fnInit&&c.fnInit.call(this,a,c);d.setHandCursor(!0);"flash_save"==c.sAction?(d.setAction("save"),d.setCharSet("utf16le"==c.sCharSet?"UTF16LE":"UTF8"),
d.setBomInc(c.bBomInc),d.setFileName(c.sFileName.replace("*",this.fnGetTitle(c)))):"flash_pdf"==c.sAction?(d.setAction("pdf"),d.setFileName(c.sFileName.replace("*",this.fnGetTitle(c)))):d.setAction("copy");d.addEventListener("mouseOver",function(){b(a).addClass(c.sButtonClassHover);null!==c.fnMouseover&&c.fnMouseover.call(f,a,c,d)});d.addEventListener("mouseOut",function(){b(a).removeClass(c.sButtonClassHover);null!==c.fnMouseout&&c.fnMouseout.call(f,a,c,d)});d.addEventListener("mouseDown",function(){null!==
c.fnClick&&c.fnClick.call(f,a,c,d)});d.addEventListener("complete",function(b,e){null!==c.fnComplete&&c.fnComplete.call(f,a,c,d,e);f._fnCollectionHide(a,c)});this._fnFlashGlue(d,a,c.sToolTip)},_fnFlashGlue:function(a,c,b){var d=this,j=c.getAttribute("id");if(g.getElementById(j)){if(a.glue(c,b),a.domElement.parentNode!=a.div.parentNode&&"undefined"==typeof d.__bZCWarning)d.s.dt.oApi._fnLog(this.s.dt,0,"It looks like you are using the version of ZeroClipboard which came with TableTools 1. Please update to use the version that came with TableTools 2."),
d.__bZCWarning=!0}else setTimeout(function(){d._fnFlashGlue(a,c,b)},100)},_fnFlashSetText:function(a,c){var b=this._fnChunkData(c,8192);a.clearText();for(var d=0,j=b.length;d<j;d++)a.appendText(b[d])},_fnColumnTargets:function(a){var c=[],b=this.s.dt;if("object"==typeof a){for(i=0,iLen=b.aoColumns.length;i<iLen;i++)c.push(!1);for(i=0,iLen=a.length;i<iLen;i++)c[a[i]]=!0}else if("visible"==a)for(i=0,iLen=b.aoColumns.length;i<iLen;i++)c.push(b.aoColumns[i].bVisible?!0:!1);else if("hidden"==a)for(i=0,
iLen=b.aoColumns.length;i<iLen;i++)c.push(b.aoColumns[i].bVisible?!1:!0);else if("sortable"==a)for(i=0,iLen=b.aoColumns.length;i<iLen;i++)c.push(b.aoColumns[i].bSortable?!0:!1);else for(i=0,iLen=b.aoColumns.length;i<iLen;i++)c.push(!0);return c},_fnNewline:function(a){return"auto"==a.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":a.sNewLine},_fnGetDataTablesData:function(a){var c,f,d,j,e,g=[],h="",k=this.s.dt,o=RegExp(a.sFieldBoundary,"g"),l=this._fnColumnTargets(a.mColumns),p="undefined"!=
typeof a.bSelectedOnly?a.bSelectedOnly:!1;if(a.bHeader){e=[];for(c=0,f=k.aoColumns.length;c<f;c++)l[c]&&(h=k.aoColumns[c].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),h=this._fnHtmlDecode(h),e.push(this._fnBoundData(h,a.sFieldBoundary,o)));g.push(e.join(a.sFieldSeperator))}for(d=0,j=k.aiDisplay.length;d<j;d++)if("none"==this.s.select.type||!p||p&&b(k.aoData[k.aiDisplay[d]].nTr).hasClass(this.s.select.selectedClass)||p&&0==this.s.select.selected.length){e=[];for(c=0,f=k.aoColumns.length;c<
f;c++)l[c]&&(h=k.oApi._fnGetCellData(k,k.aiDisplay[d],c,"display"),a.fnCellRender?h=a.fnCellRender(h,c)+"":"string"==typeof h?(h=h.replace(/\n/g," "),h=h.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3"),h=h.replace(/<.*?>/g,"")):h+="",h=h.replace(/^\s+/,"").replace(/\s+$/,""),h=this._fnHtmlDecode(h),e.push(this._fnBoundData(h,a.sFieldBoundary,o)));g.push(e.join(a.sFieldSeperator))}if(a.bFooter&&null!==k.nTFoot){e=[];for(c=0,f=k.aoColumns.length;c<f;c++)l[c]&&null!==
k.aoColumns[c].nTf&&(h=k.aoColumns[c].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,""),h=this._fnHtmlDecode(h),e.push(this._fnBoundData(h,a.sFieldBoundary,o)));g.push(e.join(a.sFieldSeperator))}return _sLastData=g.join(this._fnNewline(a))},_fnBoundData:function(a,c,b){return""===c?a:c+a.replace(b,c+c)+c},_fnChunkData:function(a,c){for(var b=[],d=a.length,e=0;e<d;e+=c)e+c<d?b.push(a.substring(e,e+c)):b.push(a.substring(e,d));return b},_fnHtmlDecode:function(a){if(-1==a.indexOf("&"))return a;var a=
this._fnChunkData(a,2048),c=g.createElement("div"),b,d,e,m="";for(b=0,d=a.length;b<d;b++)e=a[b].lastIndexOf("&"),-1!=e&&8<=a[b].length&&e>a[b].length-8&&(a[b].substr(e),a[b]=a[b].substr(0,e)),c.innerHTML=a[b],m+=c.childNodes[0].nodeValue;return m},_fnPrintConfig:function(a,c){var f=this;null!==c.fnInit&&c.fnInit.call(this,a,c);if(""!==c.sToolTip)a.title=c.sToolTip;b(a).hover(function(){b(a).addClass(c.sButtonClassHover)},function(){b(a).removeClass(c.sButtonClassHover)});null!==c.fnSelect&&TableTools._fnEventListen(this,
"select",function(b){c.fnSelect.call(f,a,c,b)});b(a).click(function(b){b.preventDefault();f._fnPrintStart.call(f,b,c);null!==c.fnClick&&c.fnClick.call(f,a,c,null);null!==c.fnComplete&&c.fnComplete.call(f,a,c,null,null);f._fnCollectionHide(a,c)})},_fnPrintStart:function(a,c){var f=this,d=this.s.dt;this._fnPrintHideNodes(d.nTable);this.s.print.saveStart=d._iDisplayStart;this.s.print.saveLength=d._iDisplayLength;if(c.bShowAll)d._iDisplayStart=0,d._iDisplayLength=-1,d.oApi._fnCalculateEnd(d),d.oApi._fnDraw(d);
(""!==d.oScroll.sX||""!==d.oScroll.sY)&&this._fnPrintScrollStart(d);var d=d.aanFeatures,j;for(j in d)if("i"!=j&&"t"!=j&&1==j.length)for(var m=0,n=d[j].length;m<n;m++)this.dom.print.hidden.push({node:d[j][m],display:"block"}),d[j][m].style.display="none";b(g.body).addClass("DTTT_Print");if(""!==c.sInfo){var h=g.createElement("div");h.className="DTTT_print_info";h.innerHTML=c.sInfo;g.body.appendChild(h);setTimeout(function(){b(h).fadeOut("normal",function(){g.body.removeChild(h)})},2E3)}if(""!==c.sMessage)this.dom.print.message=
g.createElement("div"),this.dom.print.message.className="DTTT_PrintMessage",this.dom.print.message.innerHTML=c.sMessage,g.body.insertBefore(this.dom.print.message,g.body.childNodes[0]);this.s.print.saveScroll=b(e).scrollTop();e.scrollTo(0,0);this.s.print.funcEnd=function(a){f._fnPrintEnd.call(f,a)};b(g).bind("keydown",null,this.s.print.funcEnd)},_fnPrintEnd:function(a){if(27==a.keyCode){a.preventDefault();var a=this.s.dt,c=this.s.print,f=this.dom.print;this._fnPrintShowNodes();(""!==a.oScroll.sX||
""!==a.oScroll.sY)&&this._fnPrintScrollEnd();e.scrollTo(0,c.saveScroll);if(null!==f.message)g.body.removeChild(f.message),f.message=null;b(g.body).removeClass("DTTT_Print");a._iDisplayStart=c.saveStart;a._iDisplayLength=c.saveLength;a.oApi._fnCalculateEnd(a);a.oApi._fnDraw(a);b(g).unbind("keydown",this.s.print.funcEnd);this.s.print.funcEnd=null}},_fnPrintScrollStart:function(){var a=this.s.dt;a.nScrollHead.getElementsByTagName("div")[0].getElementsByTagName("table");var c=a.nTable.parentNode,f=a.nTable.getElementsByTagName("thead");
0<f.length&&a.nTable.removeChild(f[0]);null!==a.nTFoot&&(f=a.nTable.getElementsByTagName("tfoot"),0<f.length&&a.nTable.removeChild(f[0]));f=a.nTHead.cloneNode(!0);a.nTable.insertBefore(f,a.nTable.childNodes[0]);null!==a.nTFoot&&(f=a.nTFoot.cloneNode(!0),a.nTable.insertBefore(f,a.nTable.childNodes[1]));if(""!==a.oScroll.sX)a.nTable.style.width=b(a.nTable).outerWidth()+"px",c.style.width=b(a.nTable).outerWidth()+"px",c.style.overflow="visible";if(""!==a.oScroll.sY)c.style.height=b(a.nTable).outerHeight()+
"px",c.style.overflow="visible"},_fnPrintScrollEnd:function(){var a=this.s.dt,c=a.nTable.parentNode;if(""!==a.oScroll.sX)c.style.width=a.oApi._fnStringToCss(a.oScroll.sX),c.style.overflow="auto";if(""!==a.oScroll.sY)c.style.height=a.oApi._fnStringToCss(a.oScroll.sY),c.style.overflow="auto"},_fnPrintShowNodes:function(){for(var a=this.dom.print.hidden,c=0,b=a.length;c<b;c++)a[c].node.style.display=a[c].display;a.splice(0,a.length)},_fnPrintHideNodes:function(a){for(var c=this.dom.print.hidden,f=a.parentNode,
d=f.childNodes,e=0,g=d.length;e<g;e++)if(d[e]!=a&&1==d[e].nodeType){var n=b(d[e]).css("display");if("none"!=n)c.push({node:d[e],display:n}),d[e].style.display="none"}"BODY"!=f.nodeName&&this._fnPrintHideNodes(f)}};TableTools._aInstances=[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){for(var a=[],c=0,b=TableTools._aInstances.length;c<b;c++)TableTools._aInstances[c].s.master&&a.push(TableTools._aInstances[c]);return a};TableTools.fnGetInstance=function(a){"object"!=typeof a&&(a=g.getElementById(a));
for(var c=0,b=TableTools._aInstances.length;c<b;c++)if(TableTools._aInstances[c].s.master&&TableTools._aInstances[c].dom.table==a)return TableTools._aInstances[c];return null};TableTools._fnEventListen=function(a,c,b){TableTools._aListeners.push({that:a,type:c,fn:b})};TableTools._fnEventDispatch=function(a,c,b){for(var d=TableTools._aListeners,e=0,g=d.length;e<g;e++)a.dom.table==d[e].that.dom.table&&d[e].type==c&&d[e].fn(b)};TableTools.BUTTONS={csv:{sAction:"flash_save",sCharSet:"utf8",bBomInc:!1,
sFileName:"*.csv",sFieldBoundary:'"',sFieldSeperator:",",sNewLine:"auto",sTitle:"",sToolTip:"",sButtonClass:"DTTT_button_csv",sButtonClassHover:"DTTT_button_csv_hover",sButtonText:"CSV",mColumns:"all",bHeader:!0,bFooter:!0,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,fnClick:function(a,c,b){this.fnSetText(b,this.fnGetTableData(c))},fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},xls:{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",
sNewLine:"auto",sTitle:"",sToolTip:"",sButtonClass:"DTTT_button_xls",sButtonClassHover:"DTTT_button_xls_hover",sButtonText:"Excel",mColumns:"all",bHeader:!0,bFooter:!0,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,fnClick:function(a,c,b){this.fnSetText(b,this.fnGetTableData(c))},fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},copy:{sAction:"flash_copy",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",sToolTip:"",sButtonClass:"DTTT_button_copy",sButtonClassHover:"DTTT_button_copy_hover",
sButtonText:"Copy",mColumns:"all",bHeader:!0,bFooter:!0,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,fnClick:function(a,c,b){this.fnSetText(b,this.fnGetTableData(c))},fnSelect:null,fnComplete:function(a,c,b,d){a=d.split("\n").length;a=null===this.s.dt.nTFoot?a-1:a-2;alert("Copied "+a+" row"+(1==a?"":"s")+" to the clipboard")},fnInit:null,fnCellRender:null},pdf:{sAction:"flash_pdf",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"\n",sFileName:"*.pdf",sToolTip:"",sTitle:"",sButtonClass:"DTTT_button_pdf",
sButtonClassHover:"DTTT_button_pdf_hover",sButtonText:"PDF",mColumns:"all",bHeader:!0,bFooter:!1,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(a,c,b){this.fnSetText(b,"title:"+this.fnGetTitle(c)+"\nmessage:"+c.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(c)+"\norientation:"+c.sPdfOrientation+"\nsize:"+c.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(c))},fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},
print:{sAction:"print",sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.",sMessage:"",bShowAll:!0,sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonClassHover:"DTTT_button_print_hover",sButtonText:"Print",fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},text:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",
sButtonText:"Text button",mColumns:"all",bHeader:!0,bFooter:!0,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},select:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Select button",mColumns:"all",bHeader:!0,bFooter:!0,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:function(a){0!==this.fnGetSelected().length?b(a).removeClass("DTTT_disabled"):b(a).addClass("DTTT_disabled")},
fnComplete:null,fnInit:function(a){b(a).addClass("DTTT_disabled")},fnCellRender:null},select_single:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Select button",mColumns:"all",bHeader:!0,bFooter:!0,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:function(a){1==this.fnGetSelected().length?b(a).removeClass("DTTT_disabled"):b(a).addClass("DTTT_disabled")},fnComplete:null,fnInit:function(a){b(a).addClass("DTTT_disabled")},fnCellRender:null},
select_all:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Select all",mColumns:"all",bHeader:!0,bFooter:!0,fnMouseover:null,fnMouseout:null,fnClick:function(){this.fnSelectAll()},fnSelect:function(a){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?b(a).addClass("DTTT_disabled"):b(a).removeClass("DTTT_disabled")},fnComplete:null,fnInit:null,fnCellRender:null},select_none:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",
sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Deselect all",mColumns:"all",bHeader:!0,bFooter:!0,fnMouseover:null,fnMouseout:null,fnClick:function(){this.fnSelectNone()},fnSelect:function(a){0!==this.fnGetSelected().length?b(a).removeClass("DTTT_disabled"):b(a).addClass("DTTT_disabled")},fnComplete:null,fnInit:function(a){b(a).addClass("DTTT_disabled")},fnCellRender:null},ajax:{sAction:"text",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"\n",sAjaxUrl:"/xhr.php",sToolTip:"",sButtonClass:"DTTT_button_text",
sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Ajax button",mColumns:"all",bHeader:!0,bFooter:!0,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,fnClick:function(a,c){var e=this.fnGetTableData(c);b.ajax({url:c.sAjaxUrl,data:[{name:"tableData",value:e}],success:c.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnSelect:null,fnComplete:null,fnInit:null,fnAjaxComplete:function(){alert("Ajax complete")},fnCellRender:null},
div:{sAction:"div",sToolTip:"",sButtonClass:"DTTT_nonbutton",sButtonClassHover:"",sButtonText:"Text button",fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,nContent:null,fnCellRender:null},collection:{sAction:"collection",sToolTip:"",sButtonClass:"DTTT_button_collection",sButtonClassHover:"DTTT_button_collection_hover",sButtonText:"Collection",fnMouseover:null,fnMouseout:null,fnClick:function(a,b){this._fnCollectionShow(a,b)},fnSelect:null,fnComplete:null,fnInit:null,
fnCellRender:null}};TableTools.DEFAULTS={sSwfPath:"media/swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sSelectedClass:"DTTT_selected",fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"]};TableTools.prototype.CLASS="TableTools";TableTools.VERSION="2.0.3";TableTools.prototype.VERSION=TableTools.VERSION;"function"==typeof b.fn.dataTable&&"function"==typeof b.fn.dataTableExt.fnVersionCheck&&b.fn.dataTableExt.fnVersionCheck("1.8.2")?b.fn.dataTableExt.aoFeatures.push({fnInit:function(a){a=
new TableTools(a.oInstance,"undefined"!=typeof a.oInit.oTableTools?a.oInit.oTableTools:{});TableTools._aInstances.push(a);return a.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.8.2 or newer - www.datatables.net/download")})(jQuery,window,document);
